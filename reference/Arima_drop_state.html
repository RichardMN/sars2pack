<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>fit ARIMA model to US data dropping one state — Arima_drop_state • sars2pack</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="fit ARIMA model to US data dropping one state — Arima_drop_state" />
<meta property="og:description" content="fit ARIMA model to US data dropping one state" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-93043521-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93043521-4');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sars2pack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/add_a_dataset.html">How to add a new dataset to sars2pack</a>
    </li>
    <li>
      <a href="../articles/case_tracking.html">Case tracking datasets</a>
    </li>
    <li>
      <a href="../articles/datasets.html">Overview of available datasets</a>
    </li>
    <li>
      <a href="../articles/doMCMC.html">Building MCMC-based models of SI for SARS-Cov-2</a>
    </li>
    <li>
      <a href="../articles/how_much_testing.html">HMTPlot: How much testing</a>
    </li>
    <li>
      <a href="../articles/index.html">Introduction to sars2pack</a>
    </li>
    <li>
      <a href="../articles/map_visualization.html">Geospatial visualization of COVID-19 datasets</a>
    </li>
    <li>
      <a href="../articles/more_visualization.html">Visualizing geographic COVID-19 trends without maps</a>
    </li>
    <li>
      <a href="../articles/overview.html">Exploring the COVID-19 pandemic using sars2pack</a>
    </li>
    <li>
      <a href="../articles/phylogenetics.html">Phylogenetic data</a>
    </li>
    <li>
      <a href="../articles/r0_estimates.html">Estimating the replication rate</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/seandavi/sars2pack">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>fit ARIMA model to US data dropping one state</h1>
    <small class="dont-index">Source: <a href='https://github.com/seandavi/sars2pack/blob/master/R/Arima.R'><code>R/Arima.R</code></a></small>
    <div class="hidden name"><code>Arima_drop_state.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>fit ARIMA model to US data dropping one state</p>
    </div>

    <pre class="usage"><span class='fu'>Arima_drop_state</span>(
  <span class='no'>src_us</span>,
  <span class='no'>src_st</span>,
  <span class='kw'>state.in</span> <span class='kw'>=</span> <span class='st'>"New York"</span>,
  <span class='kw'>MAorder</span> <span class='kw'>=</span> <span class='fl'>2</span>,
  <span class='kw'>Difforder</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>basedate</span> <span class='kw'>=</span> <span class='st'>"2020-02-15"</span>,
  <span class='kw'>lookback_days</span> <span class='kw'>=</span> <span class='fl'>29</span>,
  <span class='kw'>ARorder</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>max_date</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>src_us</th>
      <td><p>tibble for national level data like that of enriched_jhu_data()</p></td>
    </tr>
    <tr>
      <th>src_st</th>
      <td><p>tibble for state level data like that of nytimes_state_data()</p></td>
    </tr>
    <tr>
      <th>state.in</th>
      <td><p>character(1) state name</p></td>
    </tr>
    <tr>
      <th>MAorder</th>
      <td><p>numeric(1) order of moving average component</p></td>
    </tr>
    <tr>
      <th>Difforder</th>
      <td><p>numeric(1) differencing order d of ARIMA(p,d,q)</p></td>
    </tr>
    <tr>
      <th>basedate</th>
      <td><p>character(1) used by lubridate::as_date to filter away all earlier records</p></td>
    </tr>
    <tr>
      <th>lookback_days</th>
      <td><p>numeric(1) only uses this many days from most recent in src</p></td>
    </tr>
    <tr>
      <th>ARorder</th>
      <td><p>order of autoregressive component</p></td>
    </tr>
    <tr>
      <th>max_date</th>
      <td><p>a date from which to start lookback ... defaults to NULL in which
case the latest available date is used</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>instance of S3 class Arima_sars2pack</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Apparent discrepancies in counts in vicinity of April 15 between
NYT and JHU for full US incidence lead us to employ the two sources
for the example.  If NYT alone is used, summing to obtain USA
overall, the resulting USA incidence trend is
extravagantly variable.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>ej</span> <span class='kw'>=</span> <span class='fu'><a href='enriched_jhu_data.html'>enriched_jhu_data</a></span>()
<span class='no'>usa_full</span> <span class='kw'>=</span> <span class='fu'><a href='Arima_nation.html'>Arima_nation</a></span>(<span class='no'>ej</span>)
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>usa_full</span>)</div><div class='img'><img src='Arima_drop_state-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='no'>nyd</span> <span class='kw'>=</span> <span class='fu'><a href='nytimes_county_data.html'>nytimes_state_data</a></span>()</div><div class='output co'>#&gt; <span class='warning'>Warning: running command 'timedatectl' had status 1</span></div><div class='input'><span class='no'>drny</span> <span class='kw'>=</span> <span class='fu'>Arima_drop_state</span>(<span class='no'>ej</span>, <span class='no'>nyd</span>)
<span class='no'>drny</span></div><div class='output co'>#&gt; Arima_sars2pack instance for excl New York 
#&gt;   computed Wed Aug 26 19:01:29 2020 
#&gt;   last date used was:  2020-08-25 
#&gt;   call was: NULL
#&gt;   Model estimates: 
#&gt; Series: tsfull 
#&gt; ARIMA(0,1,2) with drift 
#&gt; 
#&gt; Coefficients:
#&gt;           ma1      ma2      drift
#&gt;       -0.7049  -0.2950  -918.7256
#&gt; s.e.   0.1689   0.1391   163.4438
#&gt; 
#&gt; sigma^2 estimated as 37944677:  log likelihood=-283.94
#&gt; AIC=575.89   AICc=577.63   BIC=581.22
#&gt; 
#&gt; Training set error measures:
#&gt;                     ME     RMSE      MAE       MPE     MAPE      MASE
#&gt; Training set -378.8979 5719.347 4239.198 -1.857048 8.739369 0.7188345
#&gt;                    ACF1
#&gt; Training set 0.06118083</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>drny</span>)</div><div class='img'><img src='Arima_drop_state-2.png' alt='' width='700' height='433' /></div><div class='input'><span class='no'>opar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>no.readonly</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='kw'>mar</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>4</span>,<span class='fl'>3</span>,<span class='fl'>2</span>,<span class='fl'>2</span>), <span class='kw'>mfrow</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>2</span>))
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>usa_full</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"all states"</span>, <span class='kw'>ylim</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>17000</span>,<span class='fl'>38000</span>))
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>drny</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>"excluding NY"</span>, <span class='kw'>ylim</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>17000</span>,<span class='fl'>38000</span>))</div><div class='img'><img src='Arima_drop_state-3.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span>(<span class='no'>opar</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sean Davis, VJ Carey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


